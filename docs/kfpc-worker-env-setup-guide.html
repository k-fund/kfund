<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ibn Worker í™˜ê²½ë³€ìˆ˜ ì„¤ì • ê°€ì´ë“œ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .copy-btn { transition: all 0.2s; }
        .copy-btn:hover { transform: scale(1.05); }
        .copied { background-color: #10B981 !important; }
    </style>
</head>
<body class="bg-gray-50 min-h-screen">
    <div class="max-w-4xl mx-auto py-8 px-4">
        <!-- í—¤ë” -->
        <div class="bg-gradient-to-r from-orange-500 to-orange-600 text-white p-8 rounded-2xl mb-8 shadow-lg">
            <h1 class="text-3xl font-bold mb-2">ğŸ”§ ibn Worker í™˜ê²½ë³€ìˆ˜ ì„¤ì •</h1>
            <p class="text-orange-100">Worker: kfpc | Account: A01027770093@gmail.com</p>
        </div>

        <!-- ì§„í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-8">
            <h2 class="text-xl font-bold text-gray-800 mb-4">ğŸ“‹ ì§„í–‰ ì²´í¬ë¦¬ìŠ¤íŠ¸</h2>
            <div class="space-y-3">
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" class="w-5 h-5 text-orange-500 rounded" id="check1">
                    <span class="text-gray-700">Cloudflare Dashboard ë¡œê·¸ì¸</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" class="w-5 h-5 text-orange-500 rounded" id="check2">
                    <span class="text-gray-700">kfpc Worker ì„¤ì • í˜ì´ì§€ ì´ë™</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" class="w-5 h-5 text-orange-500 rounded" id="check3">
                    <span class="text-gray-700">í™˜ê²½ë³€ìˆ˜ 8ê°œ ì„¤ì •</span>
                </label>
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox" class="w-5 h-5 text-orange-500 rounded" id="check4">
                    <span class="text-gray-700">API í…ŒìŠ¤íŠ¸</span>
                </label>
            </div>
        </div>

        <!-- Step 1 -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">1</span>
                <h3 class="text-lg font-bold text-gray-800">Cloudflare Dashboard ì ‘ì†</h3>
            </div>
            <div class="ml-11">
                <p class="text-gray-600 mb-4">ì•„ë˜ ë§í¬ë¥¼ í´ë¦­í•˜ì—¬ Cloudflare Workers ì„¤ì • í˜ì´ì§€ë¡œ ì´ë™í•©ë‹ˆë‹¤.</p>
                <a href="https://dash.cloudflare.com/?to=/:account/workers/services/view/kfpc/production/settings"
                   target="_blank"
                   class="inline-flex items-center gap-2 bg-orange-500 text-white px-6 py-3 rounded-lg hover:bg-orange-600 transition">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"/>
                    </svg>
                    Cloudflare Dashboard ì—´ê¸°
                </a>
                <div class="mt-4 p-4 bg-blue-50 rounded-lg">
                    <p class="text-blue-800 text-sm">
                        <strong>ê²½ë¡œ:</strong> Workers & Pages â†’ kfpc â†’ Settings â†’ Variables and Secrets
                    </p>
                </div>
            </div>
        </div>

        <!-- Step 2 -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">2</span>
                <h3 class="text-lg font-bold text-gray-800">í™˜ê²½ë³€ìˆ˜ ì¶”ê°€</h3>
            </div>
            <div class="ml-11">
                <p class="text-gray-600 mb-4">"Variables and Secrets" ì„¹ì…˜ì—ì„œ <strong>"Add"</strong> ë²„íŠ¼ì„ í´ë¦­í•˜ê³  ì•„ë˜ ê°’ë“¤ì„ í•˜ë‚˜ì”© ì¶”ê°€í•©ë‹ˆë‹¤.</p>
                <div class="p-4 bg-yellow-50 rounded-lg mb-4">
                    <p class="text-yellow-800 text-sm">
                        âš ï¸ <strong>ì¤‘ìš”:</strong> Typeì„ <strong>"Secret"</strong>ìœ¼ë¡œ ì„ íƒí•˜ì„¸ìš” (ì•”í˜¸í™”ëœ ì €ì¥)
                    </p>
                </div>
            </div>
        </div>

        <!-- í™˜ê²½ë³€ìˆ˜ ëª©ë¡ -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-6">
            <h3 class="text-lg font-bold text-gray-800 mb-6">ğŸ“ ì„¤ì •í•  í™˜ê²½ë³€ìˆ˜ (8ê°œ)</h3>

            <!-- 1. AIRTABLE_TOKEN -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">AIRTABLE_TOKEN</span>
                    <button onclick="copyToClipboard('AIRTABLE_TOKEN', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="[Airtable Personal Access Token]"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('[Airtable Personal Access Token]', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 2. AIRTABLE_BASE_ID -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">AIRTABLE_BASE_ID</span>
                    <button onclick="copyToClipboard('AIRTABLE_BASE_ID', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="[Airtable Base ID]"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('[Airtable Base ID]', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 3. TELEGRAM_BOT_TOKEN -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">TELEGRAM_BOT_TOKEN</span>
                    <button onclick="copyToClipboard('TELEGRAM_BOT_TOKEN', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="[Telegram Bot Token]"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('[Telegram Bot Token]', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 4. TELEGRAM_CHAT_ID -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">TELEGRAM_CHAT_ID</span>
                    <button onclick="copyToClipboard('TELEGRAM_CHAT_ID', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="-1003290973230"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('-1003290973230', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 5. GA4_PROPERTY_ID -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">GA4_PROPERTY_ID</span>
                    <button onclick="copyToClipboard('GA4_PROPERTY_ID', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="[GA4 Property ID]"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('[GA4 Property ID]', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 6. SERVICE_ACCOUNT_EMAIL -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">SERVICE_ACCOUNT_EMAIL</span>
                    <button onclick="copyToClipboard('SERVICE_ACCOUNT_EMAIL', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="ibn-homepage@ibn-homepage.iam.gserviceaccount.com"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('ibn-homepage@ibn-homepage.iam.gserviceaccount.com', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 7. SERVICE_ACCOUNT_PRIVATE_KEY -->
            <div class="border-b pb-4 mb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">SERVICE_ACCOUNT_PRIVATE_KEY</span>
                    <button onclick="copyToClipboard('SERVICE_ACCOUNT_PRIVATE_KEY', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="p-3 bg-red-50 rounded-lg mb-2">
                    <p class="text-red-700 text-sm">ğŸ” <strong>ë³´ì•ˆ ì£¼ì˜:</strong> Private KeyëŠ” ë§¤ìš° ë¯¼ê°í•œ ì •ë³´ì…ë‹ˆë‹¤. ì ˆëŒ€ ì™¸ë¶€ì— ë…¸ì¶œí•˜ì§€ ë§ˆì„¸ìš”.</p>
                </div>
                <div class="flex flex-col gap-2">
                    <textarea id="privateKey" readonly rows="4"
                              class="bg-gray-50 border rounded px-3 py-2 text-xs font-mono text-gray-600">[Google Service Account Private Key - .env íŒŒì¼ì—ì„œ í™•ì¸í•˜ì„¸ìš”]</textarea>
                    <button onclick="copyPrivateKey(this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm self-end">
                        Private Key ë³µì‚¬
                    </button>
                </div>
            </div>

            <!-- 8. ADMIN_PASSWORD -->
            <div class="pb-4">
                <div class="flex items-center justify-between mb-2">
                    <span class="font-mono text-sm bg-gray-100 px-2 py-1 rounded">ADMIN_PASSWORD</span>
                    <button onclick="copyToClipboard('ADMIN_PASSWORD', this)" class="copy-btn bg-gray-200 hover:bg-gray-300 px-3 py-1 rounded text-sm">
                        ğŸ“‹ ì´ë¦„ ë³µì‚¬
                    </button>
                </div>
                <div class="flex items-center gap-2">
                    <input type="text" readonly value="[Admin Password]"
                           class="flex-1 bg-gray-50 border rounded px-3 py-2 text-sm font-mono text-gray-600">
                    <button onclick="copyToClipboard('[Admin Password]', this)"
                            class="copy-btn bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded text-sm">
                        ë³µì‚¬
                    </button>
                </div>
            </div>
        </div>

        <!-- Step 3 -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-6">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">3</span>
                <h3 class="text-lg font-bold text-gray-800">ì €ì¥ ë° ë°°í¬</h3>
            </div>
            <div class="ml-11">
                <ol class="list-decimal list-inside text-gray-600 space-y-2">
                    <li>ëª¨ë“  í™˜ê²½ë³€ìˆ˜ë¥¼ ì¶”ê°€í•œ í›„ <strong>"Save and deploy"</strong> ë²„íŠ¼ í´ë¦­</li>
                    <li>ë°°í¬ê°€ ì™„ë£Œë˜ë©´ Workerê°€ ìë™ìœ¼ë¡œ ì¬ì‹œì‘ë©ë‹ˆë‹¤</li>
                </ol>
            </div>
        </div>

        <!-- Step 4: í…ŒìŠ¤íŠ¸ -->
        <div class="bg-white p-6 rounded-xl shadow-md mb-8">
            <div class="flex items-center gap-3 mb-4">
                <span class="bg-orange-500 text-white w-8 h-8 rounded-full flex items-center justify-center font-bold">4</span>
                <h3 class="text-lg font-bold text-gray-800">API í…ŒìŠ¤íŠ¸</h3>
            </div>
            <div class="ml-11">
                <p class="text-gray-600 mb-4">í™˜ê²½ë³€ìˆ˜ ì„¤ì • í›„ ì•„ë˜ ë²„íŠ¼ì„ í´ë¦­í•˜ì—¬ API ì—°ê²°ì„ í…ŒìŠ¤íŠ¸í•©ë‹ˆë‹¤.</p>
                <button onclick="testApi()"
                        class="bg-green-500 hover:bg-green-600 text-white px-6 py-3 rounded-lg flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 10V3L4 14h7v7l9-11h-7z"/>
                    </svg>
                    /leads API í…ŒìŠ¤íŠ¸
                </button>
                <div id="testResult" class="mt-4 hidden">
                    <div class="p-4 rounded-lg" id="testResultContent"></div>
                </div>
            </div>
        </div>

        <!-- ì™„ë£Œ ì„¹ì…˜ -->
        <div class="bg-green-50 p-6 rounded-xl border border-green-200">
            <h3 class="text-lg font-bold text-green-800 mb-2">âœ… ì„¤ì • ì™„ë£Œ í›„</h3>
            <p class="text-green-700">
                ëª¨ë“  í™˜ê²½ë³€ìˆ˜ê°€ ì„¤ì •ë˜ë©´ kfpc Workerê°€ Airtable, Telegram, GA4ì™€ ì—°ë™ë˜ì–´
                ë¦¬ë“œ ìˆ˜ì§‘ ë° ì•Œë¦¼ ê¸°ëŠ¥ì´ ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.
            </p>
        </div>
    </div>

    <script>
        function copyToClipboard(text, btn) {
            navigator.clipboard.writeText(text).then(() => {
                const originalText = btn.innerText;
                btn.innerText = 'âœ“ ë³µì‚¬ë¨';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.innerText = originalText;
                    btn.classList.remove('copied');
                }, 1500);
            });
        }

        function copyPrivateKey(btn) {
            const privateKey = document.getElementById('privateKey').value;
            navigator.clipboard.writeText(privateKey).then(() => {
                btn.innerText = 'âœ“ ë³µì‚¬ë¨';
                btn.classList.add('copied');
                setTimeout(() => {
                    btn.innerText = 'Private Key ë³µì‚¬';
                    btn.classList.remove('copied');
                }, 1500);
            });
        }

        async function testApi() {
            const resultDiv = document.getElementById('testResult');
            const contentDiv = document.getElementById('testResultContent');
            resultDiv.classList.remove('hidden');
            contentDiv.className = 'p-4 rounded-lg bg-gray-100';
            contentDiv.innerHTML = '<p class="text-gray-600">â³ í…ŒìŠ¤íŠ¸ ì¤‘...</p>';

            try {
                const response = await fetch('https://kfpc.a01027770093.workers.dev/leads', {
                    method: 'GET',
                    headers: {
                        'Content-Type': 'application/json'
                    }
                });

                if (response.ok) {
                    const data = await response.json();
                    contentDiv.className = 'p-4 rounded-lg bg-green-100';
                    contentDiv.innerHTML = `
                        <p class="text-green-800 font-bold mb-2">âœ… ì—°ê²° ì„±ê³µ!</p>
                        <p class="text-green-700 text-sm">ì‘ë‹µ: ${JSON.stringify(data).substring(0, 200)}...</p>
                    `;
                } else {
                    const errorText = await response.text();
                    contentDiv.className = 'p-4 rounded-lg bg-red-100';
                    contentDiv.innerHTML = `
                        <p class="text-red-800 font-bold mb-2">âŒ ì˜¤ë¥˜ ë°œìƒ</p>
                        <p class="text-red-700 text-sm">Status: ${response.status}</p>
                        <p class="text-red-700 text-sm">ì‘ë‹µ: ${errorText.substring(0, 200)}</p>
                    `;
                }
            } catch (error) {
                contentDiv.className = 'p-4 rounded-lg bg-red-100';
                contentDiv.innerHTML = `
                    <p class="text-red-800 font-bold mb-2">âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜</p>
                    <p class="text-red-700 text-sm">${error.message}</p>
                `;
            }
        }
    </script>
</body>
</html>